%!TEX root = report.tex
\paragraph{Purpose}
\label{par:method:model:overview:purpose}
% \algemeen{A clear, concise and specific formulation of the modelâ€™s purpose. This element informs about why you need to build a complex model, and what, in general and in particular, you are going to do with your model.}

The purpose of this model is to have (build?) a traffic simulation in which we can test whether autonomous vehicles joining regular `human' traffic has an influence on the traffic delay experienced. To do this, we need a simulation in which we have different types of agents, the autonomous and the `human' ones, and a space that emulates a traffic simulation. In that simulation, we will let both types of agents drive over the roads, encounter intersections, and we will measure the delay an number of crashes. This we will do with different ratios of autonomous to human vehicles. 

\paragraph{State variables and scales}
\label{par:method:model:overview:state}

This model contains two different hierarchical levels, the Car/Driver level and the traffic level. The traffic level contains the possible roads and paths, and all the vehicles. The driver level contains all parameters necessary for the functioning of a vehicle.  

% The dimensions must be clearly defined for all parameters and variables in the tables.
	\subparagraph{Low-level state variables}
	The parameters described in \cref{tab:par:method:model:overview:state:lowlevel:car} are those contained by all drivers. 

	\later{Check that the low-level parameters are still accurate}

	\begin{table}[H]
		\centering
		\begin{tabular}{ >{\ttfamily}l  p{10.2cm} }
			\toprule
			\normalfont{Parameter}	& Purpose \\ 
			\midrule
			acceleration 			& Indicates if a vehicle has forward, backward, or no acceleration. \\ 
			targetBodyAngle 		& The angle at which the target is located, relative to the body of the vehicle. \\ 
			maxSteerAngleDeg 		& The maximum angle the wheels can turn. \\ 
			power 					& The impulse power of a vehicle. \\ 
			wheelAngleDeg 			& The current angle of the wheel, relative to the body of the vehicle. \\ 
			steeringSpeed 			& The speed with which a vehicle can turn (the turning radius). \\ 
			visionRange 			& The range of the vision of the vehicle. \\ 
			width 					& The width of the vehicle. \\ 
			length 					& The length of a vehicle. \\ 
			% colour 				& The colour of a vehicle \\ 
			driver 					& The driver agent. \\ 
			initialPosition 		& The initial position of the agent at the start of the simulation. \\ 
			% bodyFixture 			& The `fixture' of the bocy of a vehicle, used when viewing other vehicles\\ 
			% visionFixture 		& The `fixture of the vision of the vehicle, describing what a vehicle can see'\\ 
			targetSpeedKMH			& The maximum speed of a vehicle. \\ 
			path					& The path the agent is going to follow. \\ 
			\bottomrule
		\end{tabular}
		\caption{Car-owned state parameters}
		\label{tab:par:method:model:overview:state:lowlevel:car}
	\end{table}

	\subparagraph{Higher-level entities}
	
	\later{Check that the high-level parameters are still accurate}

	At the simulation level there are a few parameters, shown in \cref{tab:par:method:model:overview:state:highlevel:sim}. These are necessary for running the simulation.
	
	\begin{table}[H]
		\centering
		\begin{tabular}{ >{\ttfamily}l  p{10.5cm} }
			\toprule
			\normalfont{Parameter}	& Purpose \\  
			\midrule
			cars 					& A list of the cars in the simulation. \\ 
			streetGraph		 		& A graph representation of the network of streets. \\ 
			\bottomrule
		\end{tabular}
		\caption{Simulation-owned state parameters}
		\label{tab:par:method:model:overview:state:highlevel:sim}
	\end{table}


	\subparagraph{Scales}

	\later{Als er iets in tijdsstappen of planning verandert moet dit geupdate}

	Each time step is 33 ms. This was chosen because it is a frequent update rate that makes the visual of the simulation run smoothly, without creating a too large computational stress. Each step the agents get closer to their targets. The time horizon is longer, because each agent tries to follow a predetermined path. However, each agent also has to react to the environment. 



\paragraph{Process overview and scheduling}
\label{par:method:model:overview:process}
% \algemeen{Welke processen zitten in het model, eventueel met tabel.}

The processes active in the model are \t{steerToAvoidCars} and \t{steerTowardsPath}. 
The first checks if there is another vehicle in its vicinity and if it is going to hit it with the current driving angle. If so, the vector describing the direction the vehicle is going in is negated, causing the vehicle to decelerate or turn.
The second process is the driving of the vehicle in the direction of the target. The route towards this target has already been expressed in multiple points . A vehicle drives in the direction of the next point, and when it is close enough, drives to the one after that. Doing so, it will reach its goal, even when it gets diverted by other vehicles along the way.

% \algemeen{Bespreek scheduling van processen, welke volgorde uitgevoerd?}
Every step, each agent first checks if there are other cars it could possibly crash into before continuing on towards the target. 

% \algemeen{How is time modeled}
Time is modelled through the time steps in which a vehicle can move ahead. 

% \algemeen{How are actions that happen concurrently IRL executed in the model}
Actions that happen concurrently in real life are updating the position of every vehicle. In the simulation, this is done through choosing a small time step size, and updating every vehicle every time step. Because the time step is small enough, it will still approach a concurrent execution.

% \algemeen{Are some actions executed in a random order?}

There are no actions that are executed in a random order.
